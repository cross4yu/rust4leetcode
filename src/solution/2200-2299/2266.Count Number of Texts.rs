/*
 * [2266] Count Number of Texts
 */

// @lc code=start
impl Solution {
    pub fn count_texts(pressed_keys: String) -> i32 {
        const MOD: i64 = 1_000_000_007;
        let keys = pressed_keys.chars().collect::<Vec<_>>();
        let n: usize = keys.len().max(4);
        let mut f = vec![1; n + 1];
        let mut g = vec![1; n + 1];
        f[2] = 2;
        g[2] = 2;
        f[3] = 4;
        g[3] = 4;
        for i in 4..=n {
            f[i] = (f[i - 1] + f[i - 2] + f[i - 3]) % MOD;
            g[i] = (g[i - 1] + g[i - 2] + g[i - 3] + g[i - 4]) % MOD ;
        }
        let mut ans : i64 = 1;
        let mut cnt = 0;
        let len = keys.len();
        for (i, &c) in keys.iter().enumerate() {
            cnt += 1;
            if i == len - 1  || c != keys[i+1] {
                let cur_cnt = if c == '7' || c == '9' { g[cnt] } else { f[cnt] };
                ans = (ans * cur_cnt) % MOD;
                cnt = 0;
            }
        }
        ans as i32
    }
}
// @lc code=end



/*
// @lcpr case=start
// "22233"\n
// @lcpr case=end

// @lcpr case=start
// "222222222222222222222222222222222222"\n
// @lcpr case=end

// @lcpr case=start
// "2"\n
// @lcpr case=end

// @lcpr case=start
// "444444444444444444444444444444448888888888888888999999999999333333333333333366666666666666662222222222222222666666666666666633333333333333338888888888888888222222222222222244444444444444448888888888888222222222222222288888888888889999999999999999333333333444444664"\n
// @lcpr case=end

// @lcpr case=start
// "88888888888888888888888888888999999999999999999999999999994444444444444444444444444444488888888888888888888888888888555555555555555555555555555556666666666666666666666666666666666666666666666666666666666222222222222222222222222222226666666666666666666666666666699999999999999999999999999999888888888888888888888888888885555555555555555555555555555577777777777777777777777777777444444444444444444444444444444444444444444444444444444444433333333333333333333333333333555555555555555555555555555556666666666666666666666666666644444444444444444444444444444999999999999999999999999999996666666666666666666666666666655555555555555555555555555555444444444444444444444444444448888888888888888888888888888855555555555555555555555555555555555555555555555555555555555555555555555555555555555999999999999999555555555555555555555555555554444444444444444444444444444444555"\n
// @lcpr case=end

 */

